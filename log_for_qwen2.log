2025-09-22 13:35:22,829 - lightrag - INFO - Created new empty graph
2025-09-22 13:35:22,833 - lightrag - INFO - Process 433468 KV load full_docs with 0 records
2025-09-22 13:35:22,833 - lightrag - INFO - Process 433468 KV load text_chunks with 0 records
2025-09-22 13:35:22,833 - lightrag - INFO - Process 433468 KV load llm_response_cache with 0 records
2025-09-22 13:35:22,833 - lightrag - INFO - Process 433468 doc status load doc_status with 0 records
2025-09-22 13:35:22,833 - lightrag - INFO - limit_async: 16 new workers initialized
2025-09-22 13:35:22,834 - lightrag - INFO - Storage Initialization completed!
2025-09-22 13:35:25,489 - lightrag - INFO - Stored 1 new unique documents
2025-09-22 13:35:25,490 - lightrag - INFO - Processing 1 document(s)
2025-09-22 13:35:25,490 - lightrag - INFO - Extracting stage 1/1: unknown_source
2025-09-22 13:35:25,490 - lightrag - INFO - Processing d-id: doc-8e956e338cafa11281135d777c67ec77
2025-09-22 13:35:25,605 - lightrag - INFO - limit_async: 4 new workers initialized
2025-09-22 13:35:35,734 - lightrag - INFO -  == LLM cache == saving default: ca99ccf671154b87b0f5bd77f9b404b9
2025-09-22 13:35:44,311 - lightrag - INFO -  == LLM cache == saving default: bbcbcc565af15cc9591fa59e2d07a306
2025-09-22 13:36:01,569 - lightrag - INFO -  == LLM cache == saving default: 11e4b7ec6f3c6e030bc4cb7a772f985f
2025-09-22 13:36:11,048 - lightrag - INFO -  == LLM cache == saving default: a828bdcfea116ab0d2e0b72a0b153207
2025-09-22 13:36:17,335 - lightrag - INFO -  == LLM cache == saving default: ab61c282c0bceb0b09d4bd2f7f43aa69
2025-09-22 13:36:17,336 - lightrag - INFO - Chunk 1 of 119 extracted 10 Ent + 6 Rel
2025-09-22 13:45:44,357 - lightrag - ERROR - limit_async: Error in decorated function: 
2025-09-22 13:45:44,359 - lightrag - ERROR - Failed to extract entities and relationships: 
2025-09-22 13:45:44,366 - lightrag - ERROR - Traceback (most recent call last):
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/httpcore/_async/http11.py", line 136, in handle_async_request
    raise exc
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/httpcore/_async/http11.py", line 106, in handle_async_request
    ) = await self._receive_response_headers(**kwargs)
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/httpcore/_async/http11.py", line 177, in _receive_response_headers
    event = await self._receive_event(timeout=timeout)
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/httpcore/_async/http11.py", line 217, in _receive_event
    data = await self._network_stream.read(
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 32, in read
    with map_exceptions(exc_map):
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/NingyuanXiao/LightRAG_test/lightrag/lightrag.py", line 1003, in process_document
    await asyncio.gather(*tasks)
  File "/home/NingyuanXiao/LightRAG_test/lightrag/lightrag.py", line 1201, in _process_entity_relation_graph
    raise e
  File "/home/NingyuanXiao/LightRAG_test/lightrag/lightrag.py", line 1187, in _process_entity_relation_graph
    chunk_results = await extract_entities(
  File "/home/NingyuanXiao/LightRAG_test/lightrag/operate.py", line 854, in extract_entities
    raise task.exception()
  File "/home/NingyuanXiao/LightRAG_test/lightrag/operate.py", line 830, in _process_with_semaphore
    return await _process_single_content(chunk)
  File "/home/NingyuanXiao/LightRAG_test/lightrag/operate.py", line 770, in _process_single_content
    glean_result = await use_llm_func_with_cache(
  File "/home/NingyuanXiao/LightRAG_test/lightrag/utils.py", line 1582, in use_llm_func_with_cache
    res: str = await use_llm_func(input_text, **kwargs)
  File "/home/NingyuanXiao/LightRAG_test/lightrag/utils.py", line 585, in wait_func
    return await future
  File "/home/NingyuanXiao/LightRAG_test/lightrag/utils.py", line 369, in worker
    result = await func(*args, **kwargs)
  File "/home/NingyuanXiao/LightRAG_test/lightrag/llm/ollama.py", line 130, in ollama_model_complete
    return await _ollama_model_if_cache(
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/tenacity/asyncio/__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/tenacity/asyncio/__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/tenacity/asyncio/__init__.py", line 153, in iter
    result = await action(retry_state)
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/tenacity/_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/tenacity/__init__.py", line 400, in <lambda>
    self._add_action_func(lambda rs: rs.outcome.result())
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/concurrent/futures/_base.py", line 451, in result
    return self.__get_result()
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/concurrent/futures/_base.py", line 403, in __get_result
    raise self._exception
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/tenacity/asyncio/__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "/home/NingyuanXiao/LightRAG_test/lightrag/llm/ollama.py", line 109, in _ollama_model_if_cache
    raise e
  File "/home/NingyuanXiao/LightRAG_test/lightrag/llm/ollama.py", line 72, in _ollama_model_if_cache
    response = await ollama_client.chat(model=model, messages=messages, **kwargs)
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/ollama/_client.py", line 854, in chat
    return await self._request(
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/ollama/_client.py", line 692, in _request
    return cls(**(await self._request_raw(*args, **kwargs)).json())
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/ollama/_client.py", line 632, in _request_raw
    r = await self._client.request(*args, **kwargs)
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/NingyuanXiao/anaconda3/envs/lightrag/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ReadTimeout

2025-09-22 13:45:44,366 - lightrag - ERROR - Failed to extrat document 1/1: unknown_source
2025-09-22 13:45:44,372 - lightrag - INFO - Document processing pipeline completed
2025-09-22 13:46:01,614 - lightrag - ERROR - limit_async: Error in decorated function: 
2025-09-22 13:46:11,109 - lightrag - ERROR - limit_async: Error in decorated function: 
2025-09-22 13:46:16,644 - lightrag - INFO -  == LLM cache == saving global: e4847bbc079ef071d576aa7a609d52c2
2025-09-22 13:46:16,644 - lightrag - INFO - Process 433468 building query context...
2025-09-22 13:46:16,645 - lightrag - INFO - Query edges: Wireless Charging, Smartphone Compatibility, top_k: 60, cosine: 0.2
2025-09-22 13:46:19,346 - lightrag - INFO - Storage Finalization completed!
